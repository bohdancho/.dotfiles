#!/usr/bin/env bash

# Set Session Name
SESSION="vscubing-next"
SESSIONEXISTS=$(tmux list-sessions | grep $SESSION)

if [ "$SESSIONEXISTS" = "" ]; then
    tmux new-session -d -s $SESSION -c "$HOME/personal/vscubing/vscubing-next"

    tmux rename-window -t $SESSION:1 'vim'
    tmux send-keys -t $SESSION:1 'cd ~/personal/vscubing/vscubing-next' C-m 'vim' C-m

    tmux new-window -t $SESSION:2 -n 'server'
    tmux send-keys -t $SESSION:2 'cd ~/personal/vscubing/vscubing-next' C-m 'bun run db:local; bun run dev' C-m
fi

tmux switch-client -t $SESSION:1
